import{_ as x,r as p,u as k,c,a as t,F as S,b as V,d as E,w as U,e as B,o as d,t as w,f as D,v as I,g as N,h as C,p as O,i as R,j}from"./index-OxTU7XsW.js";const L=i=>(O("data-v-99b91f72"),i=i(),R(),i),M={class:"d-flex flex-column side-width p-4"},F=L(()=>t("h1",{class:"h4 fw-bold mb-4"},"註冊帳號",-1)),P={class:"mb-3"},T=["for"],$=["id","placeholder","type","onUpdate:modelValue","onBlur"],q={key:0,class:"fw-bold msgStyle"},z={class:"d-flex flex-column justify-content-center align-items-center"},A={__name:"SignUpView",setup(i){const s=p({email:"",nickname:"",password:"",againpassword:""}),n=p({}),v=k(),u=a=>({email:"Email",nickname:"您的暱稱",password:"密碼",againpassword:"再次輸入密碼"})[a],_=a=>a==="againpassword"?"請再次輸入密碼":"請輸入"+u(a),g=a=>a==="email"?"email":a==="password"||a==="againpassword"?"password":"text",m=a=>{if(s.value[a])n.value[a]="";else{const o={email:"此欄位不可為空",nickname:"請輸入暱稱",password:"請輸入密碼",againpassword:"需要再次輸入密碼"};n.value[a]=o[a]}},h=()=>{v.push("/")},b=()=>{if(Object.values(s.value).every(o=>o))if(s.value.password===s.value.againpassword){const o={};o.email=s.value.email,o.password=s.value.password,o.nickname=s.value.nickname;async function r(){try{let l=await j.post("https://todolist-api.hexschool.io/users/sign_up",o);console.log(l),alert("帳號註冊成功，將導航到登入頁面"),s.value={email:"",nickname:"",password:"",againpassword:""},h()}catch(l){console.log(l.response.data.message);const e=l.response.data.message;e.indexOf("email 格式錯誤")!==-1&&(n.value.email="Email格式錯誤"),e.indexOf("用戶已存在")!==-1&&(n.value.email="用戶已存在，請嘗試其他Email"),e.indexOf("password 長度不足 6 個字")!==-1&&(n.value.password="密碼長度不足6個字")}}r();return}else{n.value.againpassword="第二次輸入的密碼與第一次不符";return}else{["email","nickname","password","againpassword"].forEach(m);return}};return(a,o)=>{const r=B("RouterLink");return d(),c("div",M,[F,t("div",P,[(d(!0),c(S,null,V(s.value,(l,e)=>(d(),c("div",{key:e,class:"mb-3"},[t("label",{for:e,class:"form-label fw-bold"},w(u(e)),9,T),D(t("input",{id:e,placeholder:_(e),type:g(e),class:"form-control px-3 py-2 mb-1","onUpdate:modelValue":f=>s.value[e]=f,onBlur:f=>m(e)},null,40,$),[[I,s.value[e]]]),n.value[e]?(d(),c("p",q,w(n.value[e]),1)):N("",!0)]))),128))]),t("div",z,[t("button",{type:"button",class:"btn btn-dark px-5 mb-3 fw-bold",onClick:b}," 註冊 "),E(r,{to:"/",class:"text-decoration-none fw-bold link-dark"},{default:U(()=>[C("登入")]),_:1})])])}}},H=x(A,[["__scopeId","data-v-99b91f72"]]);export{H as default};
